<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LupyCanteen - Main App</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=20250102-CHECKOUT-FIX">
    <link rel="stylesheet" href="style-menu-fix.css?v=20250102-CHECKOUT-FIX">
    <link rel="stylesheet" href="receipt-styles.css?v=20250102-CHECKOUT-FIX">
    <link rel="stylesheet" href="modal-styles.css?v=20250102-CHECKOUT-FIX">

    <!-- PDF Generation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span class="logo-icon">ğŸ±</span>
                <span class="logo-text">LupyCanteen</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link active" onclick="showSection('home')">Beranda</a></li>
                <li><a href="menu-rapi-clean.html" class="nav-link">Menu</a></li>
                <li><a href="special.html" class="nav-link">Special</a></li>
                <li><a href="about.html" class="nav-link">Tentang</a></li>
                <li><a href="contact.html" class="nav-link">Kontak</a></li>
                <li><a href="#admin" class="nav-link admin-link" onclick="showSection('adminSection')" id="adminNavLink" style="display: none;">Dashboard</a></li>
            </ul>
            <div class="nav-cta">
                <button class="cart-btn" onclick="toggleCart()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V17C17 18.1 16.1 19 15 19H9C7.9 19 7 18.1 7 17V13M9 22C9.6 22 10 21.6 10 21S9.6 20 9 20 8 20.4 8 21 8.4 22 9 22ZM20 22C20.6 22 21 21.6 21 21S20.6 20 20 20 19 20.4 19 21 19.4 22 20 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="cart-count">0</span>
                </button>
                <button class="btn-order" onclick="showSection('fullMenu')">Pesan Sekarang</button>
                
                <!-- Admin Dashboard Button (for Admin/Kasir users) -->
                <a href="admin-dashboard.html" class="btn-admin-dashboard" id="adminDashboardBtn" style="display: flex;">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M3 4C3 3.44772 3.44772 3 4 3H8C8.55228 3 9 3.44772 9 4V8C9 8.55228 8.55228 9 8 9H4C3.44772 9 3 8.55228 3 8V4Z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M11 4C11 3.44772 11.4477 3 12 3H16C16.5523 3 17 3.44772 17 4V6C17 6.55228 16.5523 7 16 7H12C11.4477 7 11 6.55228 11 6V4Z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M3 12C3 11.4477 3.44772 11 4 11H8C8.55228 11 9 11.4477 9 12V16C9 16.5523 8.55228 17 8 17H4C3.44772 17 3 16.5523 3 16V12Z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M11 9C11 8.44772 11.4477 8 12 8H16C16.5523 8 17 8.44772 17 9V16C17 16.5523 16.5523 17 16 17H12C11.4477 17 11 16.5523 11 16V9Z" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    <span>Admin Dashboard</span>
                </a>
                
                <!-- User Info Section (for regular users) -->
                <div class="user-section" id="userInfoSection">
                    <div class="user-info">
                        <div class="user-avatar">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="user-details">
                            <div class="user-name" id="userName">administrator</div>
                            <div class="user-role" id="userRole">admin</div>
                        </div>
                        <div class="user-actions">
                            <button class="btn-logout" onclick="logout()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M6 14H3C2.44772 14 2 13.5523 2 13V3C2 2.44772 2.44772 2 3 2H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M11 11L14 8L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M14 8H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-background"></div>
        <div class="container">
            <div class="hero-content-center">
                <div class="hero-text-center">
                    <div class="hero-badge-wrapper">
                        <span class="hero-badge">ğŸ‰ Selamat Datang</span>
                    </div>
                    <h1 class="hero-title-center">
                        Selamat Datang, <span class="gradient-text" id="heroUserName">User</span>!<br>
                        Nikmati Kelezatan di <span class="gradient-text">LupyCanteen</span>
                    </h1>
                    <p class="hero-description-center">
                        Kantin sekolah modern dengan menu lezat, sehat, dan bergizi. 
                        Tersedia berbagai pilihan makanan dan minuman favorit untuk 
                        mendukung aktivitas belajar Anda setiap hari!
                    </p>
                    <div class="hero-buttons-center">
                        <button class="btn-primary hero-btn" onclick="showSection('fullMenu')">
                            <span>ğŸ½ï¸ Lihat Menu</span>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <button class="btn-secondary hero-btn" onclick="showSection('special')">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>âœ¨ Menu Spesial</span>
                        </button>
                    </div>
                    
                    <!-- Quick Stats -->
                    <div class="hero-stats-center">
                        <div class="hero-stat">
                            <span class="stat-number">50+</span>
                            <span class="stat-label">Menu Tersedia</span>
                        </div>
                        <div class="hero-stat">
                            <span class="stat-number">1000+</span>
                            <span class="stat-label">Siswa Puas</span>
                        </div>
                        <div class="hero-stat">
                            <span class="stat-number">5â­</span>
                            <span class="stat-label">Rating Terbaik</span>
                        </div>
                        <div class="hero-stat">
                            <span class="stat-number">100%</span>
                            <span class="stat-label">Halal</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">ğŸ¥—</div>
                    <h3 class="feature-title">Menu Sehat</h3>
                    <p class="feature-description">Bahan-bahan segar dan bergizi untuk kesehatan optimal</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">âš¡</div>
                    <h3 class="feature-title">Pelayanan Cepat</h3>
                    <p class="feature-description">Sistem pemesanan digital untuk efisiensi maksimal</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ’³</div>
                    <h3 class="feature-title">Pembayaran Mudah</h3>
                    <p class="feature-description">Berbagai metode pembayaran yang praktis</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ†</div>
                    <h3 class="feature-title">Kualitas Terjamin</h3>
                    <p class="feature-description">Standar kebersihan dan kualitas tinggi</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Menu Section -->
    <section id="menu" class="menu">
        <div class="container">
            <div class="section-header">
                <div class="section-badge-wrapper">
                    <span class="section-badge">ğŸ½ï¸ Menu Favorit</span>
                </div>
                <h2 class="section-title">Pilihan Menu <span class="gradient-text">Terpopuler</span></h2>
                <p class="section-description">Menu-menu terlaris yang paling disukai para siswa dengan cita rasa yang tak terlupakan</p>
            </div>

            <div class="homepage-menu-grid" id="homepageMenuContainer">
                
                <!-- Row 1 -->
                <div class="homepage-menu-card">
                    <div class="menu-image-container">
                        <img src="https://images.unsplash.com/photo-1512058564366-18510be2db19?w=400&h=300&fit=crop" alt="Nasi Goreng Spesial" class="menu-image">
                        <div class="menu-badge best-seller">BEST SELLER</div>
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Nasi Goreng Spesial</h3>
                            <p class="menu-description">Nasi goreng dengan telur, ayam, dan sayuran segar</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 12.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Nasi Goreng Spesial', 12000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card">
                    <div class="menu-image-container">
                        <img src="https://images.unsplash.com/photo-1585032226651-759b368d7246?w=400&h=300&fit=crop" alt="Mie Goreng Jawa" class="menu-image">
                        <div class="menu-badge trending">TRENDING</div>
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Mie Goreng Jawa</h3>
                            <p class="menu-description">Mie goreng khas dengan bumbu rempah pilihan</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 10.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Mie Goreng Jawa', 10000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card">
                    <div class="menu-image-container">
                        <img src="https://www.frisianflag.com/storage/app/media/uploaded-files/ayam-katsu-sederhana.jpg" alt="Ayam Katsu Crispy" class="menu-image">
                        <div class="menu-badge new">NEW</div>
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Ayam Katsu Crispy</h3>
                            <p class="menu-description">Ayam crispy dengan saus katsu spesial</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 15.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Ayam Katsu Crispy', 15000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Row 2 -->
                <div class="homepage-menu-card">
                    <div class="menu-image-container">
                        <img src="https://static.promediateknologi.id/crop/0x0:0x0/0x0/webp/photo/p2/74/2025/01/27/Gado-Gado-2337756915.jpg" alt="Gado-Gado" class="menu-image">
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Gado-Gado</h3>
                            <p class="menu-description">Menu sehat dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 11.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Gado-Gado', 11000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card">
                    <div class="menu-image-container">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b6/Baso_Malang_Karapitan.JPG" alt="Bakso Malang" class="menu-image">
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Bakso Malang</h3>
                            <p class="menu-description">Menu lezat dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 14.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Bakso Malang', 14000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card">
                    <div class="menu-image-container">
                        <img src="https://cdn.yummy.co.id/content-images/images/20200611/J1acgi7BV9YusddDwNjwvRvRvqgw7m2x-31353931383733303935d41d8cd98f00b204e9800998ecf8427e.jpg?x-oss-process=image/resize,w_388,h_388,m_fixed,x-oss-process=image/format,webp" alt="Nasi Uduk" class="menu-image">
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Nasi Uduk</h3>
                            <p class="menu-description">Menu lezat dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 9.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Nasi Uduk', 9000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Row 3 -->
                <div class="homepage-menu-card">
                    <div class="menu-image-container">
                        <img src="https://cdn.yummy.co.id/content-images/images/20230329/9IZ0mYzMAQi1EgVsb6cEbqyDCPzvNiyQ-31363830303534363638d41d8cd98f00b204e9800998ecf8427e.jpg?x-oss-process=image/resize,w_388,h_388,m_fixed,x-oss-process=image/format,webp" alt="Rendang Daging" class="menu-image">
                        <div class="menu-badge premium">PREMIUM</div>
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Rendang Daging</h3>
                            <p class="menu-description">Menu premium dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 18.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Rendang Daging', 18000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card">
                    <div class="menu-image-container">
                        <img src="https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop" alt="Soto Ayam" class="menu-image">
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Soto Ayam</h3>
                            <p class="menu-description">Menu lezat dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 13.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Soto Ayam', 13000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card">
                    <div class="menu-image-container">
                        <img src="https://cdn.yummy.co.id/content-images/images/20201013/WqfCTib25afAXzGCyok7dmAmTKGeGpkM-31363032353730383236d41d8cd98f00b204e9800998ecf8427e.jpg?x-oss-process=image/resize,w_388,h_388,m_fixed,x-oss-process=image/format,webp" alt="Es Jeruk" class="menu-image">
                        <div class="menu-badge fresh">FRESH</div>
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Es Jeruk</h3>
                            <p class="menu-description">Minuman segar dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 6.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Es Jeruk', 6000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Special Today Section -->
    <section id="special" class="special">
        <div class="special-content">
            <div class="special-image">
                <div class="image-frame">
                    <img src="https://www.dapurkobe.co.id/wp-content/uploads/ayam-geprek-keju.jpg" alt="Ayam Geprek Keju" style="width: 100%; height: 100%; object-fit: cover; border-radius: 20px;">
                    <div class="special-badge-floating">
                        <span class="badge-emoji">âœ¨</span>
                        <span>Menu Spesial</span>
                    </div>
                </div>
            </div>
            <div class="special-text">
                <span class="section-badge">Hari Ini</span>
                <h2 class="section-title">Menu Spesial <span class="gradient-text">Minggu Ini</span></h2>
                <p class="special-description">
                    Setiap minggu kami hadirkan menu spesial dengan resep baru yang pastinya tidak kalah lezat! 
                    Menu spesial minggu ini adalah <strong>Ayam Geprek Keju</strong> dengan sambal level yang bisa kamu pilih sendiri.
                </p>
                <ul class="special-features">
                    <li>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#4ade80" opacity="0.2"/>
                            <path d="M9 12L11 14L15 10" stroke="#4ade80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Ayam goreng crispy dengan keju mozzarella</span>
                    </li>
                    <li>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#4ade80" opacity="0.2"/>
                            <path d="M9 12L11 14L15 10" stroke="#4ade80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>5 level kepedasan (dari original sampai extra pedas)</span>
                    </li>
                    <li>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#4ade80" opacity="0.2"/>
                            <path d="M9 12L11 14L15 10" stroke="#4ade80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Dilengkapi dengan nasi hangat dan lalapan fresh</span>
                    </li>
                    <li>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#4ade80" opacity="0.2"/>
                            <path d="M9 12L11 14L15 10" stroke="#4ade80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Harga spesial hanya Rp 16.000</span>
                    </li>
                </ul>
                <button class="btn-primary" onclick="addSpecialToCart()">
                    <span>Pesan Menu Spesial</span>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </section>

    <!-- Full Menu Section -->
    <section id="fullMenu" class="full-menu section-hidden">
        <div class="container">
            <div class="section-header">
                <span class="section-badge">ğŸ½ï¸ Menu Lengkap</span>
                <h2 class="section-title">Menu <span class="gradient-text">LupyCanteen</span></h2>
                <p class="section-description">Pilih menu favorit Anda dan nikmati kelezatannya</p>
            </div>

            <!-- Menu Categories -->
            <div class="menu-categories">
                <button class="category-btn active" onclick="filterMenu('all')">Semua</button>
                <button class="category-btn" onclick="filterMenu('makanan')">ğŸ½ï¸ Makanan</button>
                <button class="category-btn" onclick="filterMenu('minuman')">ğŸ¥¤ Minuman</button>
                <button class="category-btn" onclick="filterMenu('snack')">ğŸ¿ Snack</button>
            </div>

            <!-- Menu Grid - Clean and Organized -->
            <div class="full-menu-grid" id="fullMenuGrid">
                
                <!-- Row 1 -->
                <div class="homepage-menu-card" data-category="makanan">
                    <div class="menu-image-container">
                        <img src="https://images.unsplash.com/photo-1512058564366-18510be2db19?w=400&h=300&fit=crop" alt="Nasi Goreng Spesial" class="menu-image">
                        <div class="menu-badge best-seller">BEST SELLER</div>
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Nasi Goreng Spesial</h3>
                            <p class="menu-description">Nasi goreng dengan telur, ayam, dan sayuran segar</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 12.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Nasi Goreng Spesial', 12000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card" data-category="makanan">
                    <div class="menu-image-container">
                        <img src="https://images.unsplash.com/photo-1585032226651-759b368d7246?w=400&h=300&fit=crop" alt="Mie Goreng Jawa" class="menu-image">
                        <div class="menu-badge trending">TRENDING</div>
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Mie Goreng Jawa</h3>
                            <p class="menu-description">Mie goreng khas dengan bumbu rempah pilihan</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 10.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Mie Goreng Jawa', 10000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card" data-category="makanan">
                    <div class="menu-image-container">
                        <img src="https://www.frisianflag.com/storage/app/media/uploaded-files/ayam-katsu-sederhana.jpg" alt="Ayam Katsu Crispy" class="menu-image">
                        <div class="menu-badge new">NEW</div>
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Ayam Katsu Crispy</h3>
                            <p class="menu-description">Ayam crispy dengan saus katsu spesial</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 15.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Ayam Katsu Crispy', 15000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Row 2 -->
                <div class="homepage-menu-card" data-category="makanan">
                    <div class="menu-image-container">
                        <img src="https://static.promediateknologi.id/crop/0x0:0x0/0x0/webp/photo/p2/74/2025/01/27/Gado-Gado-2337756915.jpg" alt="Gado-Gado" class="menu-image">
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Gado-Gado</h3>
                            <p class="menu-description">Menu sehat dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 11.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Gado-Gado', 11000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card" data-category="makanan">
                    <div class="menu-image-container">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b6/Baso_Malang_Karapitan.JPG" alt="Bakso Malang" class="menu-image">
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Bakso Malang</h3>
                            <p class="menu-description">Menu lezat dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 14.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Bakso Malang', 14000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card" data-category="makanan">
                    <div class="menu-image-container">
                        <img src="https://cdn.yummy.co.id/content-images/images/20200611/J1acgi7BV9YusddDwNjwvRvRvqgw7m2x-31353931383733303935d41d8cd98f00b204e9800998ecf8427e.jpg?x-oss-process=image/resize,w_388,h_388,m_fixed,x-oss-process=image/format,webp" alt="Nasi Uduk" class="menu-image">
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Nasi Uduk</h3>
                            <p class="menu-description">Menu lezat dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 9.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Nasi Uduk', 9000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Row 3 - Minuman -->
                <div class="homepage-menu-card" data-category="minuman">
                    <div class="menu-image-container">
                        <img src="https://cdn.yummy.co.id/content-images/images/20201013/WqfCTib25afAXzGCyok7dmAmTKGeGpkM-31363032353730383236d41d8cd98f00b204e9800998ecf8427e.jpg?x-oss-process=image/resize,w_388,h_388,m_fixed,x-oss-process=image/format,webp" alt="Es Jeruk" class="menu-image">
                        <div class="menu-badge fresh">FRESH</div>
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Es Jeruk</h3>
                            <p class="menu-description">Minuman segar dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 6.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Es Jeruk', 6000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card" data-category="minuman">
                    <div class="menu-image-container">
                        <img src="https://cdn.yummy.co.id/content-images/images/20230119/rAvgrbBssoG6rNVTeqyzirA1WhQE7Nkl-31363734313235353439d41d8cd98f00b204e9800998ecf8427e.jpg?x-oss-process=image/resize,w_388,h_388,m_fixed,x-oss-process=image/format,webp" alt="Kopi Susu" class="menu-image">
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Kopi Susu</h3>
                            <p class="menu-description">Minuman hangat dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 7.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Kopi Susu', 7000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="homepage-menu-card" data-category="snack">
                    <div class="menu-image-container">
                        <img src="https://cdn.grid.id/crop/0x0:0x0/700x465/smart/filters:format(webp):quality(100)/photo/2025/12/05/pisang-goreng-tandukjpg-20251205043631.jpg" alt="Pisang Goreng" class="menu-image">
                    </div>
                    <div class="menu-content">
                        <div class="menu-text">
                            <h3 class="menu-title">Pisang Goreng</h3>
                            <p class="menu-description">Snack lezat dari LupyCanteen</p>
                        </div>
                        <div class="menu-footer">
                            <span class="menu-price">Rp 4.000</span>
                            <div class="menu-actions">
                                <button class="btn-add" onclick="tambahKeKeranjang('Pisang Goreng', 4000)">+</button>
                                <button class="btn-edit">âœ</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            
            <button class="btn-back" onclick="showSection('home')">
                â† Kembali ke Beranda
            </button>
        </div>
    </section>

    <!-- About Section -->
    <section id="aboutSection" class="about-section section-hidden">
        <div class="container">
            <div class="section-header">
                <span class="section-badge">Tentang Kami</span>
                <h2 class="section-title">Kenali <span class="gradient-text">LupyCanteen</span></h2>
                <p class="section-description">Kantin modern dengan cita rasa tradisional</p>
            </div>

            <div class="about-content">
                <div class="about-grid">
                    <div class="about-text">
                        <h3>ğŸ± Visi Kami</h3>
                        <p>Menjadi kantin sekolah terdepan yang menyediakan makanan sehat, lezat, dan terjangkau untuk mendukung tumbuh kembang siswa-siswi tercinta.</p>
                        
                        <h3>ğŸ¯ Misi Kami</h3>
                        <ul>
                            <li>Menyediakan makanan bergizi dengan bahan-bahan berkualitas</li>
                            <li>Memberikan pelayanan terbaik dengan teknologi modern</li>
                            <li>Menciptakan lingkungan makan yang nyaman dan bersih</li>
                            <li>Mendukung gaya hidup sehat para siswa</li>
                        </ul>

                        <h3>â­ Keunggulan Kami</h3>
                        <div class="features-grid">
                            <div class="feature-item">
                                <span class="feature-icon">ğŸ¥—</span>
                                <div>
                                    <h4>Makanan Sehat</h4>
                                    <p>Bahan-bahan segar dan bergizi</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">ğŸ’³</span>
                                <div>
                                    <h4>Pembayaran Digital</h4>
                                    <p>Sistem pemesanan modern</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">ğŸ†</span>
                                <div>
                                    <h4>Kualitas Terjamin</h4>
                                    <p>Standar kebersihan tinggi</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">âš¡</span>
                                <div>
                                    <h4>Pelayanan Cepat</h4>
                                    <p>Tidak perlu antri lama</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="btn-back" onclick="showSection('home')">
                â† Kembali ke Beranda
            </button>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contactSection" class="contact-section section-hidden">
        <div class="container">
            <div class="section-header">
                <span class="section-badge">Hubungi Kami</span>
                <h2 class="section-title">Kontak <span class="gradient-text">LupyCanteen</span></h2>
                <p class="section-description">Kami siap melayani Anda dengan sepenuh hati</p>
            </div>

            <div class="contact-grid">
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">ğŸ“</div>
                        <div>
                            <h4>Alamat</h4>
                            <p>Jl. Raya Margamulya, Telukjambe Barat<br>Karawang, Jawa Barat</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">ğŸ“</div>
                        <div>
                            <h4>Telepon</h4>
                            <p>+62 812-3456-7890</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">ğŸ“§</div>
                        <div>
                            <h4>Email</h4>
                            <p>info@lupycanteen.com</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">ğŸ•’</div>
                        <div>
                            <h4>Jam Operasional</h4>
                            <p>Senin - Jumat: 07:00 - 15:00<br>Sabtu: 07:00 - 12:00</p>
                        </div>
                    </div>
                </div>
                
                <div class="map-container">
                    <iframe 
                        src="https://maps.app.goo.gl/iunCKcGm4hp3h88h6"
                        width="100%" 
                        height="400" 
                        class="contact-map"
                        allowfullscreen="" 
                        loading="lazy">
                    </iframe>
                </div>
            </div>
            
            <button class="btn-back" onclick="showSection('home')">
                â† Kembali ke Beranda
            </button>
        </div>
    </section>

    <!-- Admin Section -->
    <section id="adminSection" class="admin-section section-hidden">
        <div class="container">
            <div class="admin-header">
                <div class="admin-welcome">
                    <h2>Dashboard Admin</h2>
                    <p>Selamat datang di panel administrasi LupyCanteen</p>
                </div>
                <div class="admin-actions">
                    <button class="btn-secondary" onclick="showSection('home')">â† Kembali</button>
                </div>
            </div>

            <div class="admin-dashboard">
                <div class="admin-tabs">
                    <button class="tab-btn active" onclick="showAdminTab('overview')">Overview</button>
                    <button class="tab-btn" onclick="showAdminTab('menu')">Menu Management</button>
                    <button class="tab-btn" onclick="showAdminTab('orders')">Orders</button>
                    <button class="tab-btn" onclick="showAdminTab('users')">Users</button>
                    <button class="tab-btn" onclick="showAdminTab('reports')">Reports</button>
                </div>

                <div id="overview" class="admin-tab-content active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ½ï¸</div>
                            <div class="stat-content">
                                <div class="stat-number">45</div>
                                <div class="stat-label">Total Menu</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“¦</div>
                            <div class="stat-content">
                                <div class="stat-number">128</div>
                                <div class="stat-label">Orders Today</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ‘¥</div>
                            <div class="stat-content">
                                <div class="stat-number">1,234</div>
                                <div class="stat-label">Total Users</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ’°</div>
                            <div class="stat-content">
                                <div class="stat-number">Rp 2.5M</div>
                                <div class="stat-label">Revenue</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="menu" class="admin-tab-content">
                    <h3>Menu Management</h3>
                    <p>Kelola menu makanan dan minuman di sini.</p>
                </div>

                <div id="orders" class="admin-tab-content">
                    <h3>Order Management</h3>
                    <p>Kelola pesanan pelanggan di sini.</p>
                </div>

                <div id="users" class="admin-tab-content">
                    <h3>User Management</h3>
                    <p>Kelola pengguna sistem di sini.</p>
                </div>

                <div id="reports" class="admin-tab-content">
                    <h3>Reports</h3>
                    <p>Lihat laporan penjualan dan statistik di sini.</p>
                </div>
            </div>
        </div>
    </section>

   
    <!-- Form Tambah Menu Kecil -->
    <div id="quickAddMenuForm" style="display: none; position: fixed; top: 180px; right: 30px; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.2); width: 280px; z-index: 1001;">
        <h3 style="color: #333; margin-bottom: 15px; font-size: 1.1rem;">â• Tambah Menu Baru</h3>
        <div style="margin-bottom: 12px;">
            <label style="display: block; color: #666; font-size: 0.9rem; margin-bottom: 5px;">Nama Menu</label>
            <input type="text" id="quickMenuName" placeholder="Contoh: Ayam Bakar" style="width: 100%; padding: 8px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.9rem;">
        </div>
        <div style="margin-bottom: 12px;">
            <label style="display: block; color: #666; font-size: 0.9rem; margin-bottom: 5px;">Harga (Rp)</label>
            <input type="number" id="quickMenuPrice" placeholder="15000" style="width: 100%; padding: 8px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.9rem;">
        </div>
        <div style="margin-bottom: 12px;">
            <label style="display: block; color: #666; font-size: 0.9rem; margin-bottom: 5px;">Kategori</label>
            <select id="quickMenuCategory" style="width: 100%; padding: 8px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.9rem;">
                <option value="makanan">ğŸ½ï¸ Makanan</option>
                <option value="minuman">ğŸ¥¤ Minuman</option>
                <option value="snack">ğŸ¿ Snack</option>
            </select>
        </div>
        <div style="margin-bottom: 15px;">
            <label style="display: block; color: #666; font-size: 0.9rem; margin-bottom: 5px;">Deskripsi</label>
            <input type="text" id="quickMenuDescription" placeholder="Deskripsi singkat menu" style="width: 100%; padding: 8px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.9rem;">
        </div>
        <div style="display: flex; gap: 10px;">
            <button onclick="saveQuickMenu()" style="background: #4CAF50; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.9rem; flex: 1;">Simpan</button>
            <button onclick="cancelQuickMenu()" style="background: #f44336; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.9rem; flex: 1;">Batal</button>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ›’ Keranjang Belanja</h2>
                <span class="close" onclick="toggleCart()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="cartItems"></div>
                <div class="cart-total">
                    <div class="total-row">
                        <span>Total: </span>
                        <span id="cartTotal">Rp 0</span>
                    </div>
                </div>
                <div class="cart-actions">
                    <button class="btn-secondary" onclick="clearCart()">Kosongkan</button>
                    <button class="btn-primary" onclick="checkout()">Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div id="receiptModal" class="modal">
        <div class="modal-content receipt-modal">
            <div class="modal-header">
                <h2>ğŸ§¾ Struk Pembelian</h2>
                <span class="close" onclick="closeReceipt()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="receiptContent" class="receipt"></div>
                <div class="receipt-actions">
                    <button class="btn-secondary" onclick="printReceipt()">ğŸ–¨ï¸ Print</button>
                    <button class="btn-primary" onclick="downloadPDF()">ğŸ“„ Download PDF</button>
                </div>
            </div>
        </div>
    </div>

    <script src="main-app-script.js?v=20250102-CHECKOUT-FINAL-FIX"></script>
    
    <!-- INLINE CHECKOUT FUNCTIONS - GUARANTEED TO WORK -->
    <script>
        // WORKING CHECKOUT SYSTEM - INLINE TO AVOID CACHE ISSUES
        let keranjangBelanja = [];
        let totalHarga = 0;
        let nomorTransaksi = '';

        // Fungsi tambah ke keranjang
        function tambahKeKeranjang(nama, harga) {
            console.log('ğŸ›’ TAMBAH KE KERANJANG:', nama, harga);
            
            // Cari item yang sudah ada
            const itemAda = keranjangBelanja.find(item => item.nama === nama);
            
            if (itemAda) {
                itemAda.jumlah += 1;
            } else {
                keranjangBelanja.push({
                    nama: nama,
                    harga: harga,
                    jumlah: 1
                });
            }
            
            updateCartDisplay();
            updateCartCount();
            
            // Show success message
            const totalItems = keranjangBelanja.reduce((sum, item) => sum + item.jumlah, 0);
            alert('âœ… ' + nama + ' berhasil ditambahkan ke keranjang!\\n\\nTotal item: ' + totalItems);
        }

        // Update cart count
        function updateCartCount() {
            const cartCountElement = document.querySelector('.cart-count');
            if (cartCountElement) {
                const totalItems = keranjangBelanja.reduce((sum, item) => sum + item.jumlah, 0);
                cartCountElement.textContent = totalItems;
            }
        }

        // Update cart display
        function updateCartDisplay() {
            const cartItemsElement = document.getElementById('cartItems');
            const cartTotalElement = document.getElementById('cartTotal');
            
            if (!cartItemsElement || !cartTotalElement) return;
            
            if (keranjangBelanja.length === 0) {
                cartItemsElement.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">Keranjang kosong</div>';
                cartTotalElement.textContent = 'Rp 0';
                return;
            }
            
            let html = '';
            totalHarga = 0;
            
            keranjangBelanja.forEach((item, index) => {
                const subtotal = item.harga * item.jumlah;
                totalHarga += subtotal;
                
                html += `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee;">
                        <div>
                            <strong>${item.nama}</strong><br>
                            <small>Rp ${item.harga.toLocaleString()} per item</small>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <button onclick="kurangiJumlah(${index})" style="background: #ff6b6b; color: white; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer;">-</button>
                            <span>${item.jumlah}</span>
                            <button onclick="tambahJumlah(${index})" style="background: #4CAF50; color: white; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer;">+</button>
                        </div>
                        <div><strong>Rp ${subtotal.toLocaleString()}</strong></div>
                    </div>
                `;
            });
            
            cartItemsElement.innerHTML = html;
            cartTotalElement.textContent = 'Rp ' + totalHarga.toLocaleString();
        }

        // Tambah jumlah item
        function tambahJumlah(index) {
            keranjangBelanja[index].jumlah += 1;
            updateCartDisplay();
            updateCartCount();
        }

        // Kurangi jumlah item
        function kurangiJumlah(index) {
            if (keranjangBelanja[index].jumlah > 1) {
                keranjangBelanja[index].jumlah -= 1;
            } else {
                keranjangBelanja.splice(index, 1);
            }
            updateCartDisplay();
            updateCartCount();
        }

        // Toggle cart modal
        function toggleCart() {
            const modal = document.getElementById('cartModal');
            if (modal) {
                if (modal.style.display === 'none' || modal.style.display === '') {
                    updateCartDisplay();
                    modal.style.display = 'block';
                } else {
                    modal.style.display = 'none';
                }
            }
        }

        // Clear cart
        function clearCart() {
            if (keranjangBelanja.length === 0) {
                alert('Keranjang sudah kosong!');
                return;
            }
            
            if (confirm('Yakin ingin mengosongkan keranjang?')) {
                keranjangBelanja = [];
                totalHarga = 0;
                updateCartDisplay();
                updateCartCount();
                alert('âœ… Keranjang berhasil dikosongkan!');
            }
        }

        // Generate nomor transaksi
        function generateNomorTransaksi() {
            const now = new Date();
            const tahun = now.getFullYear().toString().substr(-2);
            const bulan = (now.getMonth() + 1).toString().padStart(2, '0');
            const tanggal = now.getDate().toString().padStart(2, '0');
            const jam = now.getHours().toString().padStart(2, '0');
            const menit = now.getMinutes().toString().padStart(2, '0');
            const detik = now.getSeconds().toString().padStart(2, '0');
            
            return 'LC' + tahun + bulan + tanggal + jam + menit + detik;
        }

        // Checkout function
        function checkout() {
            if (keranjangBelanja.length === 0) {
                alert('âŒ Keranjang kosong! Silakan pilih menu terlebih dahulu.');
                return;
            }
            
            // Generate nomor transaksi
            nomorTransaksi = generateNomorTransaksi();
            
            // Show receipt modal
            showReceiptModal();
            
            // Close cart modal
            const cartModal = document.getElementById('cartModal');
            if (cartModal) {
                cartModal.style.display = 'none';
            }
        }

        // Show receipt modal with professional layout
        function showReceiptModal() {
            const modal = document.getElementById('receiptModal');
            const content = document.getElementById('receiptContent');
            
            if (!modal || !content) {
                alert('âœ… Checkout berhasil!\\n\\nNo. Transaksi: ' + nomorTransaksi + '\\nTotal: Rp ' + totalHarga.toLocaleString());
                return;
            }
            
            const now = new Date();
            const tanggal = now.toLocaleDateString('id-ID', { 
                day: '2-digit', 
                month: '2-digit', 
                year: 'numeric' 
            });
            const waktu = now.toLocaleTimeString('id-ID', { 
                hour: '2-digit', 
                minute: '2-digit'
            });
            
            let html = `
                <div style="font-family: 'Arial', sans-serif; max-width: 320px; margin: 0 auto; background: white; padding: 25px; border: 3px solid #333; border-radius: 8px;">
                    
                    <!-- HEADER SECTION -->
                    <div style="text-align: center; border-bottom: 3px solid #333; padding-bottom: 15px; margin-bottom: 20px;">
                        <h1 style="margin: 0; font-size: 24px; font-weight: bold; color: #333;">LupyCanteen</h1>
                        <p style="margin: 8px 0 4px 0; font-size: 13px; color: #666;">Kantin Sekolah Modern</p>
                        <p style="margin: 2px 0; font-size: 12px; color: #666;">Jl. Raya Margamulya, Telukjambe Barat</p>
                        <p style="margin: 2px 0; font-size: 12px; color: #666;">Telp: (021) 123-4567</p>
                    </div>
                    
                    <!-- TRANSACTION INFO SECTION -->
                    <div style="margin-bottom: 20px; font-size: 12px;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 3px 0; width: 35%;">Tanggal</td>
                                <td style="padding: 3px 0; width: 5%;">:</td>
                                <td style="padding: 3px 0; font-weight: bold;">${tanggal}</td>
                            </tr>
                            <tr>
                                <td style="padding: 3px 0;">Waktu</td>
                                <td style="padding: 3px 0;">:</td>
                                <td style="padding: 3px 0; font-weight: bold;">${waktu}</td>
                            </tr>
                            <tr>
                                <td style="padding: 3px 0;">No. Transaksi</td>
                                <td style="padding: 3px 0;">:</td>
                                <td style="padding: 3px 0; font-weight: bold;">${nomorTransaksi}</td>
                            </tr>
                            <tr>
                                <td style="padding: 3px 0;">Kasir</td>
                                <td style="padding: 3px 0;">:</td>
                                <td style="padding: 3px 0; font-weight: bold;">Admin</td>
                            </tr>
                        </table>
                    </div>
                    
                    <!-- ITEMS SECTION -->
                    <div style="border-top: 2px solid #333; border-bottom: 2px solid #333; padding: 15px 0; margin-bottom: 20px;">
                        <div style="font-weight: bold; margin-bottom: 12px; font-size: 14px; text-align: center; color: #333;">DETAIL PESANAN</div>
                        
                        <!-- Items Header -->
                        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 11px; color: #666; margin-bottom: 8px; padding-bottom: 5px; border-bottom: 1px solid #ddd;">
                            <span style="width: 40%;">Item</span>
                            <span style="width: 15%; text-align: center;">Qty</span>
                            <span style="width: 20%; text-align: center;">Harga</span>
                            <span style="width: 25%; text-align: right;">Total</span>
                        </div>
            `;
            
            keranjangBelanja.forEach((item, index) => {
                const subtotal = item.harga * item.jumlah;
                const itemName = item.nama.length > 18 ? item.nama.substring(0, 18) + '...' : item.nama;
                
                html += `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; padding: 5px 0; ${index < keranjangBelanja.length - 1 ? 'border-bottom: 1px dotted #ccc;' : ''}">
                        <span style="width: 40%; font-size: 11px; font-weight: bold;">${itemName}</span>
                        <span style="width: 15%; text-align: center; font-size: 11px;">${item.jumlah}</span>
                        <span style="width: 20%; text-align: center; font-size: 10px;">${item.harga.toLocaleString('id-ID')}</span>
                        <span style="width: 25%; text-align: right; font-size: 11px; font-weight: bold;">${subtotal.toLocaleString('id-ID')}</span>
                    </div>
                `;
            });
            
            const totalItems = keranjangBelanja.reduce((sum, item) => sum + item.jumlah, 0);
            
            html += `
                    </div>
                    
                    <!-- SUMMARY SECTION -->
                    <div style="margin-bottom: 20px; font-size: 12px;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 3px 0; width: 50%;">Total Item</td>
                                <td style="padding: 3px 0; width: 5%;">:</td>
                                <td style="padding: 3px 0; text-align: right; font-weight: bold;">${totalItems} pcs</td>
                            </tr>
                            <tr>
                                <td style="padding: 3px 0;">Subtotal</td>
                                <td style="padding: 3px 0;">:</td>
                                <td style="padding: 3px 0; text-align: right; font-weight: bold;">Rp ${totalHarga.toLocaleString('id-ID')}</td>
                            </tr>
                            <tr>
                                <td style="padding: 3px 0;">Pajak (0%)</td>
                                <td style="padding: 3px 0;">:</td>
                                <td style="padding: 3px 0; text-align: right;">Rp 0</td>
                            </tr>
                            <tr>
                                <td style="padding: 3px 0;">Diskon</td>
                                <td style="padding: 3px 0;">:</td>
                                <td style="padding: 3px 0; text-align: right;">Rp 0</td>
                            </tr>
                        </table>
                    </div>
                    
                    <!-- TOTAL SECTION -->
                    <div style="border-top: 3px solid #333; padding-top: 15px; margin-bottom: 20px; text-align: center; background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <div style="font-weight: bold; font-size: 16px; margin-bottom: 8px; color: #333;">TOTAL BAYAR</div>
                        <div style="font-weight: bold; font-size: 24px; color: #e74c3c;">Rp ${totalHarga.toLocaleString('id-ID')}</div>
                    </div>
                    
                    <!-- FOOTER SECTION -->
                    <div style="border-top: 2px solid #333; padding-top: 15px; text-align: center; font-size: 11px; line-height: 1.6; color: #666;">
                        <p style="margin: 4px 0; font-weight: bold; color: #333;">Terima kasih atas kunjungan Anda!</p>
                        <p style="margin: 4px 0;">Selamat menikmati makanan ğŸ˜Š</p>
                        <p style="margin: 4px 0;">Kritik & Saran: (021) 123-4567</p>
                        <div style="margin-top: 12px; padding-top: 8px; border-top: 1px solid #ddd;">
                            <p style="margin: 2px 0; font-size: 10px; color: #999;">Scan untuk review:</p>
                            <p style="margin: 2px 0; font-size: 12px; font-weight: bold;">[QR CODE]</p>
                        </div>
                        <p style="margin: 12px 0 0 0; font-size: 9px; color: #999; font-style: italic;">Â© 2025 LupyCanteen - Kantin Sekolah Modern</p>
                    </div>
                    
                </div>
            `;
            
            content.innerHTML = html;
            modal.style.display = 'block';
        }

        // Close receipt modal
        function closeReceipt() {
            const modal = document.getElementById('receiptModal');
            if (modal) {
                modal.style.display = 'none';
                
                if (confirm('Checkout berhasil! Kosongkan keranjang untuk transaksi berikutnya?')) {
                    clearCart();
                }
            }
        }

        // Print receipt
        function printReceipt() {
            window.print();
        }

        // Download PDF with professional receipt layout
        function downloadPDF() {
            if (typeof window.jspdf === 'undefined') {
                alert('âŒ PDF library tidak tersedia. Menggunakan alternatif print to PDF.');
                printReceipt();
                return;
            }
            
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: [80, 280] // Taller for better spacing
                });
                
                const now = new Date();
                let yPos = 8;
                const leftMargin = 6;
                const rightMargin = 74;
                const centerX = 40;
                
                // ===== HEADER SECTION =====
                doc.setFontSize(18);
                doc.setFont('helvetica', 'bold');
                doc.text('LupyCanteen', centerX, yPos, { align: 'center' });
                yPos += 6;
                
                doc.setFontSize(10);
                doc.setFont('helvetica', 'normal');
                doc.text('Kantin Sekolah Modern', centerX, yPos, { align: 'center' });
                yPos += 4;
                doc.text('Jl. Raya Margamulya, Telukjambe Barat', centerX, yPos, { align: 'center' });
                yPos += 4;
                doc.text('Telp: (021) 123-4567', centerX, yPos, { align: 'center' });
                yPos += 8;
                
                // Header separator
                doc.setLineWidth(0.8);
                doc.line(leftMargin, yPos, rightMargin, yPos);
                yPos += 8;
                
                // ===== TRANSACTION INFO =====
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                
                const tanggal = now.toLocaleDateString('id-ID', { 
                    day: '2-digit', 
                    month: '2-digit', 
                    year: 'numeric' 
                });
                const waktu = now.toLocaleTimeString('id-ID', { 
                    hour: '2-digit', 
                    minute: '2-digit'
                });
                
                // Transaction info in clean format
                doc.text('Tanggal', leftMargin, yPos);
                doc.text(': ' + tanggal, leftMargin + 20, yPos);
                yPos += 5;
                
                doc.text('Waktu', leftMargin, yPos);
                doc.text(': ' + waktu, leftMargin + 20, yPos);
                yPos += 5;
                
                doc.text('No. Transaksi', leftMargin, yPos);
                doc.text(': ' + nomorTransaksi, leftMargin + 20, yPos);
                yPos += 5;
                
                doc.text('Kasir', leftMargin, yPos);
                doc.text(': Admin', leftMargin + 20, yPos);
                yPos += 8;
                
                // Transaction separator
                doc.setLineWidth(0.5);
                doc.line(leftMargin, yPos, rightMargin, yPos);
                yPos += 8;
                
                // ===== ITEMS HEADER =====
                doc.setFontSize(10);
                doc.setFont('helvetica', 'bold');
                doc.text('DETAIL PESANAN', centerX, yPos, { align: 'center' });
                yPos += 6;
                
                // Column headers
                doc.setFontSize(8);
                doc.setFont('helvetica', 'bold');
                doc.text('Item', leftMargin, yPos);
                doc.text('Qty', leftMargin + 35, yPos);
                doc.text('Harga', leftMargin + 45, yPos);
                doc.text('Total', rightMargin - 5, yPos, { align: 'right' });
                yPos += 4;
                
                // Header underline
                doc.setLineWidth(0.3);
                doc.line(leftMargin, yPos, rightMargin, yPos);
                yPos += 6;
                
                // ===== ITEMS LIST =====
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(8);
                
                keranjangBelanja.forEach((item, index) => {
                    const subtotal = item.harga * item.jumlah;
                    
                    // Item name (truncate if too long)
                    let itemName = item.nama;
                    if (itemName.length > 20) {
                        itemName = itemName.substring(0, 20) + '...';
                    }
                    
                    doc.text(itemName, leftMargin, yPos);
                    doc.text(item.jumlah.toString(), leftMargin + 37, yPos, { align: 'center' });
                    doc.text(item.harga.toLocaleString('id-ID'), leftMargin + 50, yPos, { align: 'center' });
                    doc.text(subtotal.toLocaleString('id-ID'), rightMargin - 5, yPos, { align: 'right' });
                    yPos += 5;
                    
                    // Add dotted line between items
                    if (index < keranjangBelanja.length - 1) {
                        doc.setLineWidth(0.1);
                        doc.setLineDashPattern([1, 1], 0);
                        doc.line(leftMargin, yPos + 1, rightMargin, yPos + 1);
                        doc.setLineDashPattern([], 0); // Reset dash pattern
                        yPos += 3;
                    }
                });
                
                yPos += 5;
                
                // Items separator
                doc.setLineWidth(0.5);
                doc.line(leftMargin, yPos, rightMargin, yPos);
                yPos += 8;
                
                // ===== SUMMARY SECTION =====
                const totalItems = keranjangBelanja.reduce((sum, item) => sum + item.jumlah, 0);
                
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                
                // Summary rows
                doc.text('Total Item:', leftMargin, yPos);
                doc.text(totalItems + ' pcs', rightMargin - 5, yPos, { align: 'right' });
                yPos += 5;
                
                doc.text('Subtotal:', leftMargin, yPos);
                doc.text('Rp ' + totalHarga.toLocaleString('id-ID'), rightMargin - 5, yPos, { align: 'right' });
                yPos += 5;
                
                doc.text('Pajak (0%):', leftMargin, yPos);
                doc.text('Rp 0', rightMargin - 5, yPos, { align: 'right' });
                yPos += 5;
                
                doc.text('Diskon:', leftMargin, yPos);
                doc.text('Rp 0', rightMargin - 5, yPos, { align: 'right' });
                yPos += 8;
                
                // Total separator (thick line)
                doc.setLineWidth(1);
                doc.line(leftMargin, yPos, rightMargin, yPos);
                yPos += 8;
                
                // ===== TOTAL SECTION =====
                doc.setFontSize(14);
                doc.setFont('helvetica', 'bold');
                doc.text('TOTAL BAYAR', centerX, yPos, { align: 'center' });
                yPos += 6;
                
                doc.setFontSize(16);
                doc.text('Rp ' + totalHarga.toLocaleString('id-ID'), centerX, yPos, { align: 'center' });
                yPos += 10;
                
                // Final separator
                doc.setLineWidth(1);
                doc.line(leftMargin, yPos, rightMargin, yPos);
                yPos += 10;
                
                // ===== FOOTER SECTION =====
                doc.setFontSize(9);
                doc.setFont('helvetica', 'normal');
                doc.text('Terima kasih atas kunjungan Anda!', centerX, yPos, { align: 'center' });
                yPos += 5;
                doc.text('Selamat menikmati makanan ğŸ˜Š', centerX, yPos, { align: 'center' });
                yPos += 5;
                doc.text('Kritik & Saran: (021) 123-4567', centerX, yPos, { align: 'center' });
                yPos += 8;
                
                // QR Code placeholder (optional)
                doc.setFontSize(8);
                doc.text('Scan untuk review:', centerX, yPos, { align: 'center' });
                yPos += 4;
                doc.text('[QR CODE]', centerX, yPos, { align: 'center' });
                yPos += 8;
                
                // Copyright
                doc.setFontSize(7);
                doc.setFont('helvetica', 'italic');
                doc.text('Â© 2025 LupyCanteen - Kantin Sekolah Modern', centerX, yPos, { align: 'center' });
                
                // Save PDF with timestamp
                const timestamp = now.toISOString().slice(0, 19).replace(/[:-]/g, '').replace('T', '_');
                const filename = `LupyCanteen_${timestamp}_${nomorTransaksi}.pdf`;
                doc.save(filename);
                
                alert('âœ… Struk berhasil didownload!\\n\\nğŸ“„ File: ' + filename + '\\nğŸ’° Total: Rp ' + totalHarga.toLocaleString('id-ID') + '\\nğŸ“¦ Items: ' + totalItems + ' pcs');
                
            } catch (error) {
                console.error('Error generating PDF:', error);
                alert('âŒ Gagal membuat PDF: ' + error.message + '\\n\\nMenggunakan alternatif print to PDF.');
                printReceipt();
            }
        }

        // Make functions globally available
        window.tambahKeKeranjang = tambahKeKeranjang;
        window.toggleCart = toggleCart;
        window.clearCart = clearCart;
        window.checkout = checkout;
        window.printReceipt = printReceipt;
        window.downloadPDF = downloadPDF;
        window.closeReceipt = closeReceipt;

        console.log('âœ… INLINE CHECKOUT SYSTEM LOADED - ALL FUNCTIONS AVAILABLE');
    </script>
    
    <!-- Quick Add Menu Functions -->
    <script>
        // Quick Add Menu Functions
        function toggleQuickAddMenu() {
            const form = document.getElementById('quickAddMenuForm');
            if (form.style.display === 'none' || form.style.display === '') {
                form.style.display = 'block';
            } else {
                form.style.display = 'none';
            }
        }

        function saveQuickMenu() {
            const name = document.getElementById('quickMenuName').value;
            const price = document.getElementById('quickMenuPrice').value;
            const category = document.getElementById('quickMenuCategory').value;
            const description = document.getElementById('quickMenuDescription').value;
            
            if (!name || !price) {
                alert('Nama dan harga harus diisi!');
                return;
            }
            
            // Add to homepage menu grid
            const menuContainer = document.getElementById('homepageMenuContainer');
            const newMenuCard = document.createElement('div');
            newMenuCard.className = 'homepage-menu-card';
            newMenuCard.innerHTML = `
                <div class="menu-image-container">
                    <img src="https://via.placeholder.com/400x300/4CAF50/white?text=Menu+Baru" alt="${name}" class="menu-image">
                    <div class="menu-badge new">NEW</div>
                </div>
                <div class="menu-content">
                    <div class="menu-text">
                        <h3 class="menu-title">${name}</h3>
                        <p class="menu-description">${description || 'Menu baru dari LupyCanteen'}</p>
                    </div>
                    <div class="menu-footer">
                        <span class="menu-price">Rp ${parseInt(price).toLocaleString('id-ID')}</span>
                        <div class="menu-actions">
                            <button class="btn-add" onclick="tambahKeKeranjang('${name}', ${price})">+</button>
                            <button class="btn-edit">âœ</button>
                        </div>
                    </div>
                </div>
            `;
            
            menuContainer.appendChild(newMenuCard);
            
            // Reset form
            document.getElementById('quickMenuName').value = '';
            document.getElementById('quickMenuPrice').value = '';
            document.getElementById('quickMenuDescription').value = '';
            
            // Close form
            document.getElementById('quickAddMenuForm').style.display = 'none';
            
            alert('Menu "' + name + '" berhasil ditambahkan!');
        }

        function cancelQuickMenu() {
            document.getElementById('quickAddMenuForm').style.display = 'none';
            document.getElementById('quickMenuName').value = '';
            document.getElementById('quickMenuPrice').value = '';
            document.getElementById('quickMenuDescription').value = '';
        }

        // Close form when clicking outside
        document.addEventListener('click', function(event) {
            const form = document.getElementById('quickAddMenuForm');
            const button = document.querySelector('.add-menu-btn-small');
            
            if (form && button && !form.contains(event.target) && !button.contains(event.target)) {
                form.style.display = 'none';
            }
        });

        // Add hover effect to button
        document.addEventListener('DOMContentLoaded', function() {
            const addBtn = document.querySelector('.add-menu-btn-small');
            if (addBtn) {
                addBtn.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.1)';
                    this.style.boxShadow = '0 6px 20px rgba(76, 175, 80, 0.6)';
                });
                addBtn.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                    this.style.boxShadow = '0 4px 15px rgba(76, 175, 80, 0.4)';
                });
            }
        });
    </script>
    
    <!-- Force checkout functionality to work -->
    <script>
        // Force enable checkout functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ”§ FORCE CHECKOUT FIX - Ensuring checkout works');
            
            // Wait for main script to load
            setTimeout(() => {
                // Force show cart count
                const cartCountElement = document.querySelector('.cart-count');
                if (cartCountElement) {
                    cartCountElement.style.display = 'inline';
                    cartCountElement.style.visibility = 'visible';
                    console.log('âœ… Cart count element forced visible');
                }
                
                // Force show admin dashboard button
                const adminDashboardBtn = document.getElementById('adminDashboardBtn');
                if (adminDashboardBtn) {
                    adminDashboardBtn.style.display = 'flex';
                    adminDashboardBtn.style.visibility = 'visible';
                    adminDashboardBtn.style.opacity = '1';
                    console.log('âœ… Admin dashboard button forced visible');
                }
                
                // All checkout functions disabled to avoid conflicts
                console.log('âš ï¸ All checkout functions disabled to avoid conflicts');
                console.log('âœ… Use CHECKOUT-FINAL-SOLUTION.html for working checkout system');
                
                // Show info notification
                showWorkingNotification('âš ï¸ Checkout disabled. Use CHECKOUT-FINAL-SOLUTION.html for working system.', 'info');
                
            }, 1000);
        });
        
        // Working notification system
        function showWorkingNotification(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};
                color: white;
                padding: 20px 25px;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                z-index: 2000;
                font-weight: 600;
                max-width: 400px;
                font-size: 16px;
                font-family: 'Poppins', sans-serif;
                animation: slideIn 0.3s ease-out;
            `;
            toast.innerHTML = message;
            
            document.body.appendChild(toast);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.style.animation = 'slideOut 0.3s ease-in';
                    setTimeout(() => toast.remove(), 300);
                }
            }, 5000);
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>

    <!-- DEBUG SCRIPT FOR CHECKOUT FUNCTIONS -->
    <script>
        // Force reload checkout functions after page load
        window.addEventListener('load', function() {
            console.log('ğŸ”§ DEBUG: Page loaded, checking checkout functions...');
            
            setTimeout(function() {
                // Check if functions exist
                const functions = ['tambahKeKeranjang', 'toggleCart', 'clearCart', 'checkout'];
                functions.forEach(funcName => {
                    if (typeof window[funcName] === 'function') {
                        console.log('âœ… ' + funcName + ' is available');
                    } else {
                        console.error('âŒ ' + funcName + ' NOT FOUND');
                    }
                });
                
                // Make sure cart variables exist
                if (typeof keranjangBelanja !== 'undefined') {
                    console.log('âœ… keranjangBelanja variable exists');
                } else {
                    console.error('âŒ keranjangBelanja variable NOT FOUND');
                    // Initialize if missing
                    window.keranjangBelanja = [];
                    console.log('ğŸ”§ Initialized keranjangBelanja');
                }
                
                // Test add to cart function
                console.log('ğŸ§ª Testing tambahKeKeranjang function...');
                if (typeof tambahKeKeranjang === 'function') {
                    console.log('âœ… tambahKeKeranjang function is ready to use');
                } else {
                    console.error('âŒ tambahKeKeranjang function failed to load');
                }
            }, 2000);
        });
        
        // Add global error handler
        window.addEventListener('error', function(e) {
            console.error('ğŸš¨ JavaScript Error:', e.error);
        });
    </script>

    <!-- LOGOUT FUNCTION FOR USER -->
    <script>
        // Logout function for regular users
        function logout() {
            console.log('ğŸšª User logout function called');
            if (confirm('Apakah Anda yakin ingin logout?')) {
                console.log('âœ… User confirmed logout');
                
                try {
                    // Clear all user data from storage
                    localStorage.removeItem('lupycanteen_user');
                    sessionStorage.removeItem('lupycanteen_user');
                    localStorage.removeItem('lupycanteen_token');
                    sessionStorage.removeItem('lupycanteen_token');
                    localStorage.removeItem('lupycanteen_cart');
                    sessionStorage.removeItem('lupycanteen_cart');
                    
                    // Clear cart data
                    if (typeof keranjangBelanja !== 'undefined') {
                        keranjangBelanja = [];
                    }
                    
                    console.log('ğŸ—‘ï¸ User data and cart cleared from storage');
                    
                    // Show success message
                    alert('âœ… Logout berhasil! Anda akan diarahkan ke halaman login.');
                    
                    // Redirect to login page
                    setTimeout(() => {
                        console.log('ğŸ”„ Redirecting to login page...');
                        window.location.href = 'login-first.html';
                    }, 1000);
                    
                } catch (error) {
                    console.error('âŒ Error during logout:', error);
                    alert('âŒ Error saat logout: ' + error.message);
                }
            } else {
                console.log('âŒ User cancelled logout');
            }
        }

        // Make logout function globally available
        window.logout = logout;
        
        console.log('âœ… User logout function loaded and available');
    </script>
</body>
</html>
